<launch>
  <gz_server
    world_sdf_file="$(find-pkg-share worlds)/worlds/example_world.sdf">
  </gz_server>

  <ros_gz_bridge bridge_name="example_bridge">
    <topic
      ros_topic_name="/cmd_vel_ros"
      gz_topic_name="/cmd_vel"
      ros_type_name="geometry_msgs/msg/Twist"
      gz_type_name="gz.msgs.Twist"
      lazy="false"
      direction="ROS_TO_GZ" />

    <topic
      ros_topic_name="/images_raw"
      gz_topic_name="/world/example_world/model/vehicle_blue/link/camera_link/sensor/camera/image"
      ros_type_name="sensor_msgs/msg/Image"
      gz_type_name="gz.msgs.Image"
      lazy="false"
      direction="GZ_TO_ROS" />

    <topic
      ros_topic_name="/point_cloud_raw"
      gz_topic_name="/world/example_world/model/vehicle_blue/link/camera_link/sensor/depth_camera/depth_image/points"
      ros_type_name="sensor_msgs/msg/PointCloud2"
      gz_type_name="gz.msgs.PointCloudPacked"
      lazy="false"
      direction="GZ_TO_ROS" />
  </ros_gz_bridge>

  <!-- <node pkg="twist_publisher" exec="twist_publisher" /> -->

  <node pkg="image_subscriber" exec="image_subscriber" emulate_tty="true"/>
</launch>
